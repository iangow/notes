<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ian D. Gow">
<meta name="dcterms.date" content="2022-10-13">

<title>Should Bao et al.&nbsp;(2020) be retracted? – notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5b4ad623e5705c0698d39aec6f10cf02.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">notes</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#dramatis-personae" id="toc-dramatis-personae" class="nav-link active" data-scroll-target="#dramatis-personae">Dramatis personae</a></li>
  <li><a href="#bklyz1" id="toc-bklyz1" class="nav-link" data-scroll-target="#bklyz1">BKLYZ1</a></li>
  <li><a href="#bklyz3" id="toc-bklyz3" class="nav-link" data-scroll-target="#bklyz3">BKLYZ3</a></li>
  <li><a href="#are-their-grounds-for-retraction" id="toc-are-their-grounds-for-retraction" class="nav-link" data-scroll-target="#are-their-grounds-for-retraction">Are their grounds for retraction?</a>
  <ul class="collapse">
  <li><a href="#is-there-evidence-of-misconduct" id="toc-is-there-evidence-of-misconduct" class="nav-link" data-scroll-target="#is-there-evidence-of-misconduct">Is there evidence of misconduct?</a></li>
  </ul></li>
  <li><a href="#some-observations" id="toc-some-observations" class="nav-link" data-scroll-target="#some-observations">Some observations</a>
  <ul class="collapse">
  <li><a href="#test-period" id="toc-test-period" class="nav-link" data-scroll-target="#test-period">Test period</a></li>
  <li><a href="#the-coding-error" id="toc-the-coding-error" class="nav-link" data-scroll-target="#the-coding-error">The “coding error”</a></li>
  <li><a href="#meta-parameters" id="toc-meta-parameters" class="nav-link" data-scroll-target="#meta-parameters">Meta-parameters</a></li>
  <li><a href="#other-data-issues" id="toc-other-data-issues" class="nav-link" data-scroll-target="#other-data-issues">Other data issues</a></li>
  <li><a href="#how-unusual-are-the-issues-in-bklyz1" id="toc-how-unusual-are-the-issues-in-bklyz1" class="nav-link" data-scroll-target="#how-unusual-are-the-issues-in-bklyz1">How unusual are the issues in BKLYZ1?</a></li>
  </ul></li>
  <li><a href="#appendix-reproducing-the-coding-error" id="toc-appendix-reproducing-the-coding-error" class="nav-link" data-scroll-target="#appendix-reproducing-the-coding-error">Appendix: Reproducing the coding error</a>
  <ul class="collapse">
  <li><a href="#the-source-data-sets" id="toc-the-source-data-sets" class="nav-link" data-scroll-target="#the-source-data-sets">The source data sets</a></li>
  <li><a href="#firm-years-with-compustat-features" id="toc-firm-years-with-compustat-features" class="nav-link" data-scroll-target="#firm-years-with-compustat-features">Firm-years with Compustat features</a></li>
  <li><a href="#the-coding-error-1" id="toc-the-coding-error-1" class="nav-link" data-scroll-target="#the-coding-error-1">The “coding error”</a></li>
  <li><a href="#verifying-the-reproduction-of-the-coding-error" id="toc-verifying-the-reproduction-of-the-coding-error" class="nav-link" data-scroll-target="#verifying-the-reproduction-of-the-coding-error">Verifying the reproduction of the “coding error”</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="bklyz.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Should Bao et al.&nbsp;(2020) be retracted?</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ian D. Gow </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">13 October 2022</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><span class="citation" data-cites="walker2022erroneous">Walker (<a href="#ref-walker2022erroneous" role="doc-biblioref">2022</a>)</span> calls “for an investigation at the <em>Journal of Accounting Research</em> (JAR) into academic research misconduct” related to <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span>. In this short note, I examine a somewhat different question: Should <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> be retracted?</p>
<p>I argue that the current presentation of <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> (the original paper plus an erratum) is apt to mislead regarding its key findings. As such, some form of retraction seems appropriate, even if only to provide (through a “retract and republish” approach) a research record that is both clear and free from known error.</p>
<p>I then identify a number of factors that seem relevant to evaluating the merits of providing the authors of <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> the opportunity to republish if retraction were pursued.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<section id="dramatis-personae" class="level1">
<h1>Dramatis personae</h1>
<p>Given the seemingly dramatic title, it is perhaps appropriate to start with a listing of the “characters” appearing in this note. In order of appearance (in the world, not in this paper) we have:</p>
<ul>
<li>The Original <span class="citation" data-cites="Bao:2015aa">(BKLYZ0, <a href="#ref-Bao:2015aa" role="doc-biblioref">Bao et al. 2015</a>)</span>: Version submitted to JAR in 2015.</li>
<li>The Publication <span class="citation" data-cites="Bao:2020aa">(BKLYZ1, <a href="#ref-Bao:2020aa" role="doc-biblioref">Bao et al. 2020</a>)</span>: Version published in JAR in 2020.</li>
<li>The Critique <span class="citation" data-cites="walker2021critique">(W1, <a href="#ref-walker2021critique" role="doc-biblioref">Walker 2021a</a>)</span>: Published in <em>Econ Journal Watch</em>.</li>
<li>The Reply <span class="citation" data-cites="Bao:2021">(BKLYZ2, <a href="#ref-Bao:2021" role="doc-biblioref">Bao et al. 2021</a>)</span>: Initial reply to W1 in <em>Econ Journal Watch</em>.</li>
<li>The Rejoinder <span class="citation" data-cites="walker2021rejoinder">(W2, <a href="#ref-walker2021rejoinder" role="doc-biblioref">Walker 2021b</a>)</span>.</li>
<li>The Erratum <span class="citation" data-cites="Bao:2022aa">(BKLYZ3, <a href="#ref-Bao:2022aa" role="doc-biblioref">Bao et al. 2022</a>)</span>: Erratum published in JAR in 2022.</li>
<li>The Call for an Investigation <span class="citation" data-cites="walker2022erroneous">(W3, <a href="#ref-walker2022erroneous" role="doc-biblioref">Walker 2022</a>)</span>: Response to BKLYZ3.</li>
</ul>
</section>
<section id="bklyz1" class="level1">
<h1>BKLYZ1</h1>
<p>What is the contribution of BKLYZ1? <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020, 199</a>)</span> suggest that it is “a state-of-the-art fraud prediction model” where the fraud that is predicted is accounting fraud resulting in an Accounting and Auditing Enforcement Release (AAER) by the SEC.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<p>BKLYZ1 do indeed provide such a model. An analyst—whether an academic or a practitioner—can go to the <a href="https://github.com/JarFraud/FraudDetection/tree/39212b7901fdd61fe420979bfa30f5eadcbee47e">GitHub page associated with BKLYZ1</a>, download the code and data, open Matlab, and generate the model ready for application to new data.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p>But, even on the terms of BKLYZ1, this model has limitations. First, it doesn’t really detect accounting fraud in a general sense, so much as AAERs, a specific kind of fraud. Accounting fraud might not result in an AAER, either because it is never detected, or because it is detected but does not rise to the level that leads to an AAER, or even because the fraud is so severe that an AAER is somewhat irrelevant.</p>
<p>For example, with regard to the last category, it is not even clear that Enron, the public company at the heart of one of most notorious cases of accounting fraud this century, was the subject of an AAER. While the CEO (Jeffrey Skilling) and CFO (Andrew Fastow) of Enron ended up serving time in prison, there is no AAER related to either Skilling or Fastow (many AAERs relate to individuals). There is no AAER directed specifically at Enron, perhaps because it entered bankruptcy shortly after fraud was detected.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p>Additionally, the BKLYZ1 sample “ends in 2008 because the regulators reduced the enforcement of accounting fraud starting from around 2009, increasing the possibility that many accounting fraud cases remain undetected for the post-2008 period” <span class="citation" data-cites="Bao:2020aa">(<a href="#ref-Bao:2020aa" role="doc-biblioref">Bao et al. 2020, 203–4</a>)</span>. In other words, the specific outcome (AAERs) that the BKLYZ1 model is designed to predict becomes simply too difficult to predict after 2008. This means that the model is only useful for “predicting” AAERs before 2009. Obviously no practitioner would find such a model useful and even academics probably have little use for a model whose utility ended with the financial crisis of 2008.</p>
<p>But even if the BKLYZ1 model itself is not useful for any identifiable purpose, perhaps the contribution of BKLYZ1 is in showing that a model based on ensemble learning (“one of the most powerful machine learning methods”) “outperforms … by a large margin” approaches commonly used in prior accounting research, including models based on logistic regression. Of course, this would not be a contribution to the vast literature in statistical learning, as any practitioner in that field is unlikely to be surprised by a general result covered in an introductory textbook.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<p>Nor would we view the contribution of BKLYZ1 to be in demonstrating the superiority of the specific ensemble method used in the paper (“RUSBoost”) over alternative ensemble methods. First, BKLYZ1 do not evaluate RUSBoost relative to such other methods, including the AdaBoost approach on which RUSBoost is based. Second, earlier research has already provided evidence on this point <span class="citation" data-cites="Seiffert:2008to">(e.g., <a href="#ref-Seiffert:2008to" role="doc-biblioref">Seiffert et al. 2008</a>)</span>.</p>
<p>Rather the contribution of BKLYZ1 seems more specific to the setting of accounting fraud. <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020, 204</a>)</span> summarize their results:</p>
<blockquote class="blockquote">
<p>The average AUC and the average NDCG@k for the ensemble learning model are 0.725 and 0.049, respectively, representing a performance increase of 7.9% and 75%, respectively, relative to the performance of the better benchmark model, the Dechow et al.&nbsp;model [based on logistic regression]. These performance differences are also economically significant: Using the NDCG@k approach (where k = 1%), our best model, the ensemble learning model, identified a total of 16 fraud cases in the test period 2003–08 [versus] 9 for the Dechow et al.&nbsp;model.</p>
</blockquote>
<p>Assuming that the results of BKLYZ1 generalize from the prediction of AAERs in 2003–2008 to prediction of accounting fraud more broadly, we might conclude that BKLYZ1 provides the helpful result that a model based on RUSBoost can provide superior performance in predicting accounting fraud than a model based on logistic regression. Presumably this was the central contribution of BKLYZ1 that led to its publication in an accounting outlet as prestigious as the <em>Journal of Accounting Research</em>.</p>
</section>
<section id="bklyz3" class="level1">
<h1>BKLYZ3</h1>
<p>Unfortunately, we need to update the central finding of BKLYZ1 in light of The Erratum (BKLYZ3). BKLYZ3 corrects a “coding error” in BKLYZ1 identified by W1. The updated results are found in Panel B of Table 1 of BKLYZ3. From BKLYZ3 we learn that the summary of results quoted above should instead read.</p>
<blockquote class="blockquote">
<p>The average AUC and the average NDCG@k for the ensemble learning model are 0.7228 and 0.0237, respectively, representing a performance increase of 7.7% and <em>performance decrease of 13.2%</em>, respectively, relative to the performance of the better benchmark model, the Dechow et al.&nbsp;model [based on logistic regression]. These performance differences are also economically significant: Using the NDCG@k approach (where k = 1%), our best model, the ensemble learning model, identified a total of 10 fraud cases in the test period 2003–08 [versus] 8 for the Dechow et al.&nbsp;model.</p>
</blockquote>
<p>So, based on the criteria used in BKLYZ1, correction of the “coding error” in that paper overturns the central result of BKLYZ1. So what seems to be the sole basis for publishing BKLYZ1 is no longer true.</p>
<p>Indeed, W3 <span class="citation" data-cites="walker2022erroneous">(<a href="#ref-walker2022erroneous" role="doc-biblioref">Walker 2022, 192</a>)</span> suggests that the second sentence may need an additional correction to read:</p>
<blockquote class="blockquote">
<p>These performance differences are also economically significant: Using the NDCG@k approach (where k = 1%), our best model, the ensemble learning model, identified a total of 8 fraud cases in the test period 2003–08 [versus] 8 for the Dechow et al.&nbsp;model.</p>
</blockquote>
<p>A reader who stumbled upon BKLYZ1 and then checked BKLYZ3 could easily be forgiven for missing how the primary result of BKLYZ1 is undermined by the correction in BKLYZ3. BKLYZ3 arguably obfuscates this impact by emphasizing alternative test periods, placing renewed emphasis on AUC (the metric with weaker results in BKLYZ1), introducing novel results using NDCG@k at cut-offs not considered in BKLYZ1, and providing a rather beside-the-point discussion of an “alternative approach to coding serial fraud” that does not actually provide an alternative approach.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
</section>
<section id="are-their-grounds-for-retraction" class="level1">
<h1>Are their grounds for retraction?</h1>
<p>The Committee on Publication Ethics (COPE) provides guidance “intended to advise editors and publishers on expected practices when considering whether a retraction is appropriate, and how to issue a retraction.”<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> In light of BKLYZ3, “editors should consider retracting a publication if … they have clear evidence that the findings are unreliable … as a result of major error (eg, miscalculation or experimental error).” Given that BKLYZ3 provides evidence of an error and, based on our discussion above, this error goes to the central result of the BKLYZ1, retraction seems to be an appropriate response.</p>
<p>But note that the COPE guidelines [p.&nbsp;8] provide the option of “retract and republish”: “journals may wish to work with authors to concurrently retract an article that was found to be fundamentally flawed while simultaneously publishing a linked and corrected version of the work. This strategy … may provide an opportunity for journals and authors to transparently correct the literature when a simple correction cannot sufficiently address the flaws of the original article.”</p>
<p>Note that, while many grounds for retraction involve evidence of academic misconduct, there is no requirement that misconduct be shown for a retraction to occur. Indeed, it seems that the “retract and republish” option that plausibly has merit in the present case is predicated on the <em>absence</em> of misconduct.</p>
<section id="is-there-evidence-of-misconduct" class="level2">
<h2 class="anchored" data-anchor-id="is-there-evidence-of-misconduct">Is there evidence of misconduct?</h2>
<p>W3 claims to “make the case that there is evidence of academic misconduct and make the recommendation that the <em>Journal of Accounting Research</em> launch a full and independent investigation into the matter.” I cannot imagine that the editors of the <em>Journal of Accounting Research</em> would be keen to get into questions of academic misconduct, given the implications of any such finding. Instead, it seems more relevant to focus on issues pertinent to what is published in JAR.</p>
<p>While I argue that a better presentation of the research record requires some kind of retraction, the COPE guidelines cited above appear to afford some latitude as to whether a journal will “in some instances … wish to work with authors to concurrently retract an article that was found to be fundamentally flawed while simultaneously publishing a linked and corrected version of the work.” In other words, the <em>Journal of Accounting Research</em> arguably enjoys wide discretion over whether to “republish” a corrected version of BKLYZ1.</p>
<p>The remainder of this note collects some information that I conjecture the <em>Journal of Accounting Research</em> might consider in reaching its decision on the best course of action in response to the call from W3.</p>
</section>
</section>
<section id="some-observations" class="level1">
<h1>Some observations</h1>
<section id="test-period" class="level2">
<h2 class="anchored" data-anchor-id="test-period">Test period</h2>
<p>One thing that BKLYZ1 is very clear on is that the test period is 2003–2008. The main results (“performance increase of 7.9% and 75%”) of that paper are all based on this test period.</p>
<p>Yet the erratum [BKLYZ3, p.&nbsp;1636] mysteriously seems to emphasize 2003–2005 as the test period: “Using NDCG@k as a performance measure RUSBoost … continues the dominate the performance of the other models for the test period 2003–2005.” The published erratum [p.&nbsp;1636] even suggests that BLKYZ1 “argued that this test period was the cleanest”. Yet this is simply an impossible reading of BKLYZ1. As a reader, one needs to be confident that the “best test period” is not simply the test period that delivers the most favorable “out-of-sample” performance for RUSBoost.</p>
<p>At this point, a careful reader might point out that 2003–2005 was actually the test period used in BKLYZ0. Hopefully, BKLYZ would not be the ones to point this out, because this choice of test period was justified in BKLYZ0 on the following two two bases. First, BKLYZ0 state [p.&nbsp;4] that “the SEC’s Accounting and Auditing Enforcement Releases (AAERs) available to us end in September 2010”. Second, “there is an average of five-year gap between a fraud occurrence and the AAER publication date.”</p>
<p>As the sample period in BKLYZ1 includes AAERs that extend to 2014, the first item seems to suggest that (on the logic of BKLYZ0 itself) with the test period could be updated to from 2003–2005 to 2003–2009 (i.e., adding four years).</p>
<p>But it is important to note that BKLYZ0 included in their training sample frauds that were also in the test periods, even though the AAER publication dates would have been after the test periods in question.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
<p>If the second basis were maintained, but the issues of “serial fraud” addressed, then by the logic of BKLYZ1, the “gap” of two years used in BKLYZ1 would have to be five years, and thus the feasible test sample could not <em>begin</em> until 2006. BKLYZ1 [p.&nbsp;209] “require a gap of 24 months between the financial results announcement of the last training year and the results announcement of a test year … because <span class="citation" data-cites="Dyck:2010wi">Dyck, Morse, and Zingales (<a href="#ref-Dyck:2010wi" role="doc-biblioref">2010</a>)</span> find that it takes approximately 24 months, on average, for the initial disclosure of the fraud.”<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p>
</section>
<section id="the-coding-error" class="level2">
<h2 class="anchored" data-anchor-id="the-coding-error">The “coding error”</h2>
<p>BKLYZ3 states [p.&nbsp;1635] that [W1 and W2] “identified an error in the program codes [sic] of <a href="#bklyz1">BKLYZ1</a> posted on Github that led to an overstatement of model performance metrics. This erratum corrects this error ….” It is difficult to disagree with W3’s claim that this statement is false. There is nothing in the code posted on GitHub that created this error, instead the “error” was in data used by that code.</p>
<p>W3 claims that “to this date, the authors have offered no explanation as to why they did what they did” in recoding certain frauds to have different identifiers. This seems correct. In BKLYZ2, BKLYZ provide what may be best described as a non-explanation for what they did.</p>
<p>The example in Figure 1 of BKLYZ2 illustrates the “coding error” made in BKLYZ1 if there are missing items for the affected firm in 2004. If such missing items exist, firm-years in 2001 through 2003 would be given a different fraud ID from the 2005 firm-year (in such cases BKLYZ appended the character “1” to the fraud ID for 2001 through 2003, and the character “2” to the fraud ID for 2005). Because the fraud IDs for 2001–2003 no longer appear in the test year (2005), they are not recoded as zero. In BKLYZ2, the practice of <em>not</em> recoding these frauds in this way is described as “Walker’s approach” even though (as W2 points out), this is not so much Walker’s approach as the approach described in BKLYZ1.</p>
<p>Evidenced of this approach to recoding frauds is not legitimate is provided by the fact that doing it that way has been characterized as a “coding error” in BKLYZ3.</p>
<p>But relabelling “serial frauds” also does not make sense in that it is recoding a fraud as 1 in 2003 so that a “prediction” of the same underlying fraud can be made in 2005 even though, by the terms of the example itself (Figure 1 of BKLYZ), the SEC does not release an AAER until 2007.</p>
<p>That training models using data on frauds that are not released until after the test period is problematic seems obvious. And it seems clear from BKLYZ1’s discussion of “serial fraud” that the authors were well aware of these issues. In fact, they seem aware of the underlying issue even in BKLYZ0. As discussed above, the BKLYZ0 “sample ends in 2005 because … a significant portion of the accounting frauds that occurred over 2006–2010 are likely still unreported by the AAERs as of the end of 2010.”</p>
<p>One response the authors might have is that there might be a “key event [that] reveals 2001–2003 fraud labels” before 2004 (and before the AAER publication date in 2007). But this implies a completely different prediction problem from that studied in BKLYZ1 (or BKLYZ0), which identifies frauds as AAER events. The only reliable “key event” that identifies an AAER is the release of an AAER. As discussed above, disclosed accounting fraud might not result in AAERs for a number of reasons.</p>
<p>Saying that sometimes information is released that suggests a high likelihood of a future AAER event transforms the prediction problem from one about predicting confirmed AAERs using financial statement features into one about predicting confirmed AAERs using financial statement features and also some <em>unidentified</em> information about possible future AAERs.</p>
<p>Even if we expand the information set to include the “maybe-future-AAERs” as is done in the “not Walker’s approach” depicted in Figure 1 of BKLYZ2, there is no rationale provided as to why missing values for some items on Compustat in 2004 should be assumed to precipitate a fraud revelation event before 2004. In fact, it seems hard to conceive of one.</p>
<p>And this “coding error” is surely not something that happened by mistake. The strident defence of their approach provided in BKLYZ2 suggests that the authors did this consciously, and only in BKLYZ3 did they suggest it was a “coding error”. A reproduction of the “coding error” is included in an appendix to this note and it seems difficult to see how this “coding error” could have been made inadvertently.</p>
<p>At the very least, I think the authors should be required to provide more information of how the “coding error” was implemented so that the editors can assess the likelihood that it was indeed a “coding error” (as it is framed in BKLYZ3) and not a deliberate research design choice (as it is framed in BKLYZ2). If it seems that it was a deliberate research design choice, then I think the authors need to explain the rationale for it and also the rationale for dissembling its existence in the code posted to GitHub upon publication of BKLYZ1.</p>
<p>One possible response by the BKLYZ team might be that they have more than complied with the JAR data policy in effect when they submitted their paper and therefore do not need to account for the “coding error” beyond the code they have already provided.</p>
<p>I do not think this kind of response would be helpful in this case. There appears to be no data policy at <em>The Accounting Review</em> (see discussion <a href="https://www.linkedin.com/pulse/facilitating-replication-research-ian-gow">here</a>), but this did not prevent the retraction of <span class="citation" data-cites="bird2017">Bird and Karolyi (<a href="#ref-bird2017" role="doc-biblioref">2017</a>)</span>, where the journal stated “the authors were unable to provide the original data and code requested by the publisher” to support an assertion made in the paper and therefore retracted the paper.</p>
<p>Given the “coding error” of BKLYZ3 appears to have been a conscious decision (see BKLYZ2), I think that the onus is on the authors of BKLYZ1 to show that the “coding error” was made in good faith.</p>
</section>
<section id="meta-parameters" class="level2">
<h2 class="anchored" data-anchor-id="meta-parameters">Meta-parameters</h2>
<p>In BKLYZ2, the authors suggested that W1 was flawed because he “did not recalibrate the most important parameter of RUSBoost, number of trees, after changing the fraud training samples using his approach [i.e., the approach described in BKLYZ1].” This is somewhat understandable, as BKLYZ1 does not describe the process of calibrating these meta-parameters in the first place. Indeed, there are several meta-parameters used in BKLYZ1: number of trees, <code>MinLeafSize</code>, <code>LearnRate</code>, and <code>RatioToSmallest</code>. It is critical that such meta-parameters be fixed using the training and validation data prior to evaluating model performance against test data, lest these parameters be selected based on test performance, thus overstating the predictive value of the model.</p>
<p>In this regard, it is somewhat concerning that the number of trees parameter that is selected for the BKLYZ1 specification is 1,000 according to W3, not the 3,000 used in BKLYZ1.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> This creates the unfortunate impression that the idea of selecting meta-parameters in a transparent fashion using only validation data emerged only after observing a decline in test performance upon switching to “Walker’s approach” in preparing the erratum.</p>
</section>
<section id="other-data-issues" class="level2">
<h2 class="anchored" data-anchor-id="other-data-issues">Other data issues</h2>
<p>While it is possible to explain changes in the code between BKLYZ1 and BKLYZ3 using GitHub, some concerns remain. For example, as detailed <a href="https://gist.github.com/iangow/5d3843749de9793025618fab53e7f263">here</a>, the two data files provided are not consistent. While the PDF-rendered SAS code suggests that one data file depends on the other, there are observations on AAERs not found in the former.</p>
</section>
<section id="how-unusual-are-the-issues-in-bklyz1" class="level2">
<h2 class="anchored" data-anchor-id="how-unusual-are-the-issues-in-bklyz1">How unusual are the issues in BKLYZ1?</h2>
<p>Some readers may be surprised to learn that the core results of a published paper can disappear when a “coding error” is detected and corrected. I am not surprised. Having replicated many papers, I conjecture that the kinds of issues observed with BKLYZ1 are commonplace. Papers that say one thing, but do another (most papers using “regression discontinuity designs” fit <a href="https://iangow.github.io/far_book/regression-discontinuity-designs.html">here</a>). Papers with genuine coding errors. Papers with results that are very sensitive to “design choices” that are difficult to rationalize (see <a href="https://iangow.github.io/far_book/natural-revisited.html">here</a> and <a href="https://iangow.github.io/far_book/panel-data.html">here</a>). If such issues abound, then the merit of singling out BKLYZ1 seems to be low.</p>
<p>Another factor that seems relevant is JAR’s data policy. While not perfect, arguably JAR’s policy was critical in helping to unearth the issues not only in BKLYZ1, but in the replications I refer to above.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a> If BKLYZ1 had been accompanied by a very perfunctory effort to comply with the data policy (e.g., “here is the list of CIKs for the fraud firms in our sample”), then it would not have been possible to detect the issue raised by W1 and corrected in BKLYZ3.</p>
</section>
</section>
<section id="appendix-reproducing-the-coding-error" class="level1">
<h1>Appendix: Reproducing the coding error</h1>
<p>In this appendix, I recreate the “coding error” in <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> that was corrected by <span class="citation" data-cites="Bao:2022aa">Bao et al. (<a href="#ref-Bao:2022aa" role="doc-biblioref">2022</a>)</span>.</p>
<p>To do this, I will use the <code>tidyverse</code> package.<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="the-source-data-sets" class="level2">
<h2 class="anchored" data-anchor-id="the-source-data-sets">The source data sets</h2>
<p><a href="https://github.com/JarFraud/FraudDetection/blob/master/SAS%20coding.pdf">PDF-rendered SAS course code</a> supplied by BKLYZ suggests that the final data set used in <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> was constructed by merging data on AAERs (<code>aaer_firm_year</code>) with data on raw Compustat variables (<code>compustatindustrial7815</code>). To reproduce the “coding error”, we need to retrace the process of merging these two tables.</p>
<p>While BKLYZ provide a file <a href="https://github.com/JarFraud/FraudDetection/blob/master/AAER_firm_year.csv"><code>AAER_firm_year.csv</code></a>, it is easy to show that this was not the data file used to create the <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> data set.<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a></p>
<p>As such, we use the “final” data set used by <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> and reconstruct the relevant portions of the source data sets from that.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>jar_data <span class="ot">&lt;-</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(<span class="fu">paste0</span>(<span class="st">"https://raw.githubusercontent.com/JarFraud/"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"FraudDetection/master/"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"data_FraudDetection_JAR2020.csv"</span>),</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">col_types =</span> <span class="st">"d"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">gvkey =</span> <span class="fu">str_pad</span>(gvkey, <span class="dv">6</span>, <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">fyear =</span> <span class="fu">as.integer</span>(fyear),</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">p_aaer =</span> <span class="fu">as.character</span>(p_aaer))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We first construct the original <code>aaer_firm_year</code> data set by filling in any gaps in firm-years for an AAER found in <code>jar_data</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>aaer_firm_year <span class="ot">&lt;-</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    jar_data <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(p_aaer)) <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(p_aaer, gvkey) <span class="sc">|&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">min_year =</span> <span class="fu">min</span>(fyear), <span class="at">max_year =</span> <span class="fu">max</span>(fyear), </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rowwise</span>() <span class="sc">|&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">fyear =</span> <span class="fu">list</span>(<span class="fu">seq</span>(min_year, max_year, <span class="at">by =</span> <span class="dv">1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unnest</span>(fyear) <span class="sc">|&gt;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(gvkey, fyear, p_aaer) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>As we can see here, <code>aaer_firm_year</code> is the panel data set of firm-years affected by AAERs.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(aaer_firm_year)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  gvkey  fyear p_aaer
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt; 
1 021110  1992 1033  
2 008496  1992 1037  
3 008496  1993 1037  
4 028140  1993 1044  
5 012455  1994 1047  
6 025927  1993 1053  </code></pre>
</div>
</div>
</section>
<section id="firm-years-with-compustat-features" class="level2">
<h2 class="anchored" data-anchor-id="firm-years-with-compustat-features">Firm-years with Compustat features</h2>
<p>We next construct the data set <code>comp_firm_years</code>, which represents the firm-years in the <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> sample. These will be missing some of the firm-years in <code>aaer_firm_year</code> because of missing items on Compustat.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>comp_firm_years <span class="ot">&lt;-</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  jar_data <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">missing =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(fyear, gvkey, missing)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="the-coding-error-1" class="level2">
<h2 class="anchored" data-anchor-id="the-coding-error-1">The “coding error”</h2>
<p>Now that we have the two data sets <code>aaer_firm_year</code> and <code>comp_firm_years</code>, we can reproduce the “coding error” from <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span>.</p>
<p>The first step is to merge <code>aaer_firm_year</code> with <code>comp_firm_years</code> using the <code>left_join</code> function so that all observations on <code>aaer_firm_year</code> are retained even if there is no match on <code>comp_firm_years</code>. The cases where there is no match on <code>comp_firm_years</code> are indicated by the variable <code>missing</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>aaer_merged <span class="ot">&lt;-</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  aaer_firm_year <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(comp_firm_years, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"fyear"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">missing =</span> <span class="fu">coalesce</span>(missing, <span class="dv">1</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, fyear, p_aaer, missing)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(aaer_merged)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  gvkey  fyear p_aaer missing
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
1 021110  1992 1033         0
2 008496  1992 1037         0
3 008496  1993 1037         0
4 028140  1993 1044         0
5 012455  1994 1047         0
6 025927  1993 1053         0</code></pre>
</div>
</div>
<p>Now we can recode AAERs following <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span>. We do this by calculating <code>sum_gap</code>, a running sum of the indicator variable for one plus the number of gaps in the sample for a given AAER.<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> This will start at <code>1</code> and increase to <code>2</code> after a “gap”. We then create the variable <code>new_p_aaer</code> by combining the original AAER identifier (<code>p_aaer</code>) with <code>sum_gap</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>aaer_sum_gap <span class="ot">&lt;-</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  aaer_merged <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gvkey, p_aaer) <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(fyear) <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lag_missing =</span> <span class="fu">coalesce</span>(<span class="fu">lag</span>(missing), <span class="dv">0</span>),</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">sum_gap =</span> <span class="fu">cumsum</span>(lag_missing <span class="sc">&amp;</span> <span class="sc">!</span>missing) <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">new_p_aaer =</span> <span class="fu">paste0</span>(p_aaer, </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">as.character</span>(sum_gap))) <span class="sc">|&gt;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gvkey, fyear, p_aaer, new_p_aaer) <span class="sc">|&gt;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>If successful, my code reproduces the “coding error” in <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> in about 14 lines of code.<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a></p>
</section>
<section id="verifying-the-reproduction-of-the-coding-error" class="level2">
<h2 class="anchored" data-anchor-id="verifying-the-reproduction-of-the-coding-error">Verifying the reproduction of the “coding error”</h2>
<p>To check that we have successfully reproduced the “coding error” corrected by <span class="citation" data-cites="Bao:2022aa">Bao et al. (<a href="#ref-Bao:2022aa" role="doc-biblioref">2022</a>)</span>, we can reproduce Figure 2 of <span class="citation" data-cites="walker2021critique">Walker (<a href="#ref-walker2021critique" role="doc-biblioref">2021a</a>)</span>, which we do with the following code.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>walker_fig_2 <span class="ot">&lt;-</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    aaer_sum_gap <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(p_aaer) <span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">n_distinct</span>(new_p_aaer) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(comp_firm_years, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"gvkey"</span>, <span class="st">"fyear"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"fyear"</span>, <span class="at">id_cols =</span> <span class="st">"p_aaer"</span>, </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">"new_p_aaer"</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">as.integer</span>(p_aaer)) <span class="sc">|&gt;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="st">`</span><span class="at">1991</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">2014</span><span class="st">`</span>, <span class="sc">~</span> <span class="fu">coalesce</span>(., <span class="st">""</span>))) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>For reasons of space, we only include a portion of the table.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>walker_fig_2 <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(p_aaer, <span class="st">`</span><span class="at">1995</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">2004</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">p_aaer</th>
<th style="text-align: left;">1995</th>
<th style="text-align: left;">1996</th>
<th style="text-align: left;">1997</th>
<th style="text-align: left;">1998</th>
<th style="text-align: left;">1999</th>
<th style="text-align: left;">2000</th>
<th style="text-align: left;">2001</th>
<th style="text-align: left;">2002</th>
<th style="text-align: left;">2003</th>
<th style="text-align: left;">2004</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">857</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">1542</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">15421</td>
<td style="text-align: left;">15421</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">15422</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">1839</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">18391</td>
<td style="text-align: left;">18391</td>
<td style="text-align: left;">18391</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">18392</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">2472</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">24721</td>
<td style="text-align: left;">24721</td>
<td style="text-align: left;">24721</td>
<td style="text-align: left;">24721</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">24722</td>
<td style="text-align: left;">24722</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2504</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">25041</td>
<td style="text-align: left;">25041</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">25042</td>
<td style="text-align: left;">25042</td>
</tr>
<tr class="even">
<td style="text-align: left;">2591</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">25911</td>
<td style="text-align: left;">25911</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">25912</td>
<td style="text-align: left;">25912</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2754</td>
<td style="text-align: left;">27541</td>
<td style="text-align: left;">27541</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">27542</td>
<td style="text-align: left;">27542</td>
<td style="text-align: left;">27542</td>
<td style="text-align: left;">27542</td>
<td style="text-align: left;">27542</td>
<td style="text-align: left;">27542</td>
<td style="text-align: left;">27542</td>
</tr>
<tr class="even">
<td style="text-align: left;">2894</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">28941</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">28942</td>
<td style="text-align: left;">28942</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">2937</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">29371</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">29372</td>
</tr>
<tr class="even">
<td style="text-align: left;">2949</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">29491</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">29492</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3022</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">30221</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">30222</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">3045</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">30451</td>
<td style="text-align: left;">30451</td>
<td style="text-align: left;">30451</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">30452</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">3156</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">31561</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">3217</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">32171</td>
<td style="text-align: left;">32171</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">32172</td>
<td style="text-align: left;">32172</td>
<td style="text-align: left;">32172</td>
<td style="text-align: left;">32172</td>
<td style="text-align: left;">32172</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3909</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">3996</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Careful comparison of my data with Figure 2 of <span class="citation" data-cites="walker2021critique">Walker (<a href="#ref-walker2021critique" role="doc-biblioref">2021a</a>)</span> suggests that I have almost perfectly reproduced the “coding error” of <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span>. The one exception is that my table omits the AAER with <code>p_aaer</code> of <code>2957</code>.</p>
<p>Examining the underlying data, it seems that the issue here is the presence of multiple AAERs for the related firm for 2000 and 2001.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>aaer_firm_year <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(gvkey <span class="sc">==</span> <span class="st">"064630"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(fyear)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 3
  gvkey  fyear p_aaer
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt; 
1 064630  1997 2957  
2 064630  1998 2957  
3 064630  1999 2957  
4 064630  2000 2259  
5 064630  2000 2957  
6 064630  2001 2259  
7 064630  2001 2957  
8 064630  2002 2957  </code></pre>
</div>
</div>
<p>Returning to the SAS code supplied with <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span>, we see the following lines:</p>
<pre class="sas"><code>PROC SORT DATA=temp nodupkey;
BY gvkey fyear; RUN;</code></pre>
<p>This code would have the effect of (essentially randomly) deleting data on one AAER for any firm-year where two AAERs apply. It is unclear whether the BKLYZ team would characterize this second basis for recoding AAERs as a research design choice <span class="citation" data-cites="Bao:2021">(as the coding error was arguably characterized in <a href="#ref-Bao:2021" role="doc-biblioref">Bao et al. 2021</a>)</span> or as an error like the “coding error” replicated above.</p>
<p>The use of <code>PROC SORT nodupkey</code> is common in accounting reserarch, but in general this is a problematic practice.<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a></p>
</section>
</section>
<section id="references" class="level1 unnumbered">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Bao:2015aa" class="csl-entry" role="listitem">
Bao, Yang, Bin Ke, Bin Li, Y. Julia Yu, and Jie Zhang. 2015. <span>“Detecting Accounting Frauds in Publicly Traded <span>U.S.</span> Firms: New Perspective and New Method.”</span> <a href="https://www.rieb.kobe-u.ac.jp/tjar/conference/6th/CA3_YingriJuliaYU.pdf">https://www.rieb.kobe-u.ac.jp/tjar/conference/6th/CA3_YingriJuliaYU.pdf</a>.
</div>
<div id="ref-Bao:2020aa" class="csl-entry" role="listitem">
———. 2020. <span>“Detecting Accounting Fraud in Publicly Traded <span>U.S.</span> Firms Using a Machine Learning Approach.”</span> <em>Journal of Accounting Research</em> 58 (1): 199–235. <a href="https://doi.org/10.1111/1475-679X.12292">https://doi.org/10.1111/1475-679X.12292</a>.
</div>
<div id="ref-Bao:2021" class="csl-entry" role="listitem">
———. 2021. <span>“A Response to <span>‘Critique of an Article on Machine Learning in the Detection of Accounting Fraud’</span>.”</span> <em>Econ Journal Watch</em> 18 (1): 71–78. <a href="https://econjwatch.org/articles/a-response-to-critique-of-an-article-on-machine-learning-in-the-detection-of-accounting-fraud">https://econjwatch.org/articles/a-response-to-critique-of-an-article-on-machine-learning-in-the-detection-of-accounting-fraud</a>.
</div>
<div id="ref-Bao:2022aa" class="csl-entry" role="listitem">
———. 2022. <span>“Erratum.”</span> <em>Journal of Accounting Research</em> 60 (4): 1635–46. <a href="https://doi.org/10.1111/1475-679X.12454">https://doi.org/10.1111/1475-679X.12454</a>.
</div>
<div id="ref-bird2017" class="csl-entry" role="listitem">
Bird, Andrew, and Stephen A. Karolyi. 2017. <span>“Governance and Taxes: Evidence from Regression Discontinuity.”</span> <em>The Accounting Review</em> 92 (1): 29–50. <a href="https://doi.org/10.2308/1558-7967-92.1.000">https://doi.org/10.2308/1558-7967-92.1.000</a>.
</div>
<div id="ref-Dyck:2010wi" class="csl-entry" role="listitem">
Dyck, Alexander, Adair Morse, and Luigi Zingales. 2010. <span>“Who Blows the Whistle on Corporate Fraud?”</span> <em>The Journal of Finance</em> 65 (6): 2213–53. <a href="https://doi.org/10.1111/j.1540-6261.2010.01614.x">https://doi.org/10.1111/j.1540-6261.2010.01614.x</a>.
</div>
<div id="ref-Seiffert:2008to" class="csl-entry" role="listitem">
Seiffert, Chris, Taghi M. Khoshgoftaar, Jason Van Hulse, and Amri Napolitano. 2008. <span>“RUSBoost: Improving Classification Performance When Training Data Is Skewed.”</span> In <em>2008 19th International Conference on Pattern Recognition</em>, 1–4.
</div>
<div id="ref-walker2021critique" class="csl-entry" role="listitem">
Walker, Stephen. 2021a. <span>“Critique of an Article on Machine Learning in the Detection of Accounting Fraud.”</span> <em>Econ Journal Watch</em> 18 (2): 61. <a href="https://econjwatch.org/articles/critique-of-an-article-on-machine-learning-in-the-detection-of-accounting-fraud">https://econjwatch.org/articles/critique-of-an-article-on-machine-learning-in-the-detection-of-accounting-fraud</a>.
</div>
<div id="ref-walker2021rejoinder" class="csl-entry" role="listitem">
———. 2021b. <span>“Rejoinder to the Critique of an Article on Machine Learning in the Detection of Accounting Fraud.”</span> <em>Econ Journal Watch</em> 18 (2): 230. <a href="https://econjwatch.org/articles/rejoinder-to-the-critique-of-an-article-on-machine-learning-in-the-detection-of-accounting-fraud">https://econjwatch.org/articles/rejoinder-to-the-critique-of-an-article-on-machine-learning-in-the-detection-of-accounting-fraud</a>.
</div>
<div id="ref-walker2022erroneous" class="csl-entry" role="listitem">
———. 2022. <span>“Erroneous Erratum to Accounting Fraud Article.”</span> <em>Econ Journal Watch</em> 19 (2): 190–203. <a href="https://econjwatch.org/articles/erroneous-erratum-to-accounting-fraud-article">https://econjwatch.org/articles/erroneous-erratum-to-accounting-fraud-article</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>The views expressed here are my own. I have no formal role in this process or association with any of the papers published in the <em>Journal of Accounting Research</em> or <em>Econ Journal Watch</em>. This note arises from observations I have made in preparing a chapter on prediction for a course book on accounting research. While I have sought feedback from a small number of people on the tone and content of this note, any errors herein are my own.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>See the SEC <a href="https://www.sec.gov/divisions/enforce/friactions.htm">website</a> for details.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>In some ways, the requirement for Matlab is unfortunate, as Matlab is proprietary software and offers less transparency than an implementation using one of the open-source alternatives, such as Python or R, would. Unfortunately there is no implementation of RUSBoost in the popular Python library, <code>scikit-learn</code>, though this library does have an implementation of AdaBoost. There is also no well-documented implementation of RUSBoost in R, though there are several implementations of the AdaBoost in R. Fortunately, it is possible to implement RUSBoost in R, and I include an implementation in the R package <code>farr</code> that I created as a complement to the course book found <a href="https://iangow.github.io/far_book/">here</a>. A chapter using RUSBoost will be forthcoming in the near future.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>The <a href="https://www.sec.gov/litigation/admin/34-48230.htm">one AAER</a> in the <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> sample connected to Enron actually covers the order for Citigroup to pay an amount in a settlement arising because “Citigroup assisted [Enron and Dynegy] in enhancing artificially their financial presentations through a series of complex structured transactions … to allow those companies to report proceeds of financings as cash from operating activities”.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>The general result here being that statistical learning methods such as ensemble learning usually improve out-of-sample prediction performance relative to models—such as logistic regression—that tend to <em>overfit</em> the data used to train them.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>AAER dates are easily obtained from the SEC website, and included with the <code>farr</code> R package (see <a href="https://github.com/iangow/farr/blob/main/data-raw/get_aaer_dates.R">here</a>). My own analysis suggests that AAERs are never released prior to the last affected period, so AAERs that affect test years are always in the “future” relative to that test year, and should never be coded as anything other than zero in the training sample.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>See p.2 of <a href="https://publicationethics.org/files/retraction-guidelines-cope.pdf">Retraction Guidelines</a>.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>That this is the case is implicit in footnote 10 to BKLYZ1 and the discussion under “serial fraud” in BKLYZ1, which is not found in BKLYZ0.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>While this shorter period is definitely convenient for BKLYZ1, it seems less convenient that there is no evidence of the claim in <span class="citation" data-cites="Dyck:2010wi">Dyck, Morse, and Zingales (<a href="#ref-Dyck:2010wi" role="doc-biblioref">2010</a>)</span> itself. Perhaps the BKLYZ1 authors obtained underlying data from the authors of <span class="citation" data-cites="Dyck:2010wi">Dyck, Morse, and Zingales (<a href="#ref-Dyck:2010wi" role="doc-biblioref">2010</a>)</span>.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>In my own analysis, I found that 900 trees maximized performance in the validation sample, which is very close to the value found in W3.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>We should not infer that the situation is better at journals without a data-sharing policy. If anything, we might expect it to be worse.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>Install this using the command <code>install.packages("tidyverse")</code> in R, if necessary.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>See <a href="https://gist.github.com/iangow/5d3843749de9793025618fab53e7f263">here</a> for details. In short, the final data set used in <span class="citation" data-cites="Bao:2020aa">Bao et al. (<a href="#ref-Bao:2020aa" role="doc-biblioref">2020</a>)</span> contains AAERs not found in <code>AAER_firm_year.csv</code>.<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p>A “gap” is indicated by <code>lag_missing</code> being <code>1</code> and <code>missing</code> being zero.<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15"><p>The exact number depends on how one counts a line.<a href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16"><p>Issues associated with this practice are explored in discussion questions <a href="https://iangow.github.io/far_book/natural-revisited.html">here</a>.<a href="#fnref16" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>